# Task: 监听docker日志分析并解决充token不成功问题

**任务ID**: task_fix_recharge_260105_180640
**创建时间**: 2026-01-05 18:06:40
**状态**: 进行中
**目标**: 监听最新docker信息，分析novel-api日志，解决充token不成功问题

## 最终目标
1. 实时监控docker容器（特别是novel-api）的最新日志
2. 分析充token失败的具体错误原因
3. 修复导致充值失败的代码或配置问题
4. 验证修复后充值功能正常工作

## 拆解步骤
### 1. 实时监控docker日志
- [ ] 启动novel-api容器的实时日志监听
- [ ] 监控bepusdt容器的支付相关日志
- [ ] 关注Fabric网络的交易日志

### 2. 分析当前错误原因
- [ ] 重现充值失败场景
- [ ] 捕获详细的错误日志信息
- [ ] 分析400错误的具体原因（参数验证、签名、时间戳等）

### 3. 诊断代码问题
- [ ] 检查充值接口的参数验证逻辑
- [ ] 验证HMAC签名和时间戳验证
- [ ] 检查环境变量配置（RECHARGE_SECRET_KEY等）

### 4. 实施修复方案
- [ ] 修复发现的代码问题
- [ ] 添加更详细的错误日志
- [ ] 优化参数验证逻辑

### 5. 测试验证
- [ ] 使用test_recharge.go脚本测试修复
- [ ] 验证充值流程正常工作
- [ ] 确认链上链下数据同步

## 当前进度
### 正在进行: 创建任务文档
正在按照协议创建任务文档，准备开始实时监控docker日志。

## 下一步行动
1. 启动novel-api容器的实时日志监控
2. 尝试触发充值请求，捕获详细错误信息
3. 分析错误日志，确定具体失败原因